<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Private-Escrow x402 Demo</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <h1>Private-Escrow x402</h1>
      <div class="subtitle">Trustless micropayments for the agentic web</div>
    </header>

    <main class="split-layout">
      <!-- Left Control Panel -->
      <aside class="control-panel">
        <!-- Network Selector -->
        <div class="control-section">
          <label for="network">Select Network:</label>
          <select id="network">
            <option value="polygon-amoy" selected>Polygon Amoy</option>
            <option value="base-sepolia">Base Sepolia</option>
            <option value="arbitrum-sepolia">Arbitrum Sepolia</option>
            <option value="optimism-sepolia">Optimism Sepolia</option>
            <option value="arc">Arc Testnet</option>
          </select>
        </div>

        <!-- Payment Scheme Buttons (Click to Run) -->
        <div class="control-section">
          <label>PAYMENT SCHEME:</label>
          <div class="scheme-buttons">
            <button class="scheme-btn" data-scheme="exact">x402-exact</button>
            <button class="scheme-btn" data-scheme="escrow-deferred">
              Escrow-Deferred
            </button>
            <button class="scheme-btn" data-scheme="tee">TEE</button>
            <button class="scheme-btn" data-scheme="zk">ZK Private</button>
          </div>
          <button id="setup-escrow-btn" class="setup-button" style="display: none">
            üí∞ Setup Escrow (Deposit)
          </button>
        </div>

        <!-- Flow Characteristics -->
        <div class="characteristics-panel" id="characteristics">
          <h3>FLOW CHARACTERISTICS</h3>
          <div class="characteristic not-applies" id="char-service-settle">
            <span class="symbol">‚ö°</span>
            <span class="text">Service < Settle</span>
          </div>
          <div class="characteristic not-applies" id="char-batch">
            <span class="symbol">üì¶</span>
            <span class="text">Batch Settle</span>
          </div>
          <div class="characteristic not-applies" id="char-buyer-onchain">
            <span class="symbol">üîí</span>
            <span class="text">Buyer not Onchain</span>
          </div>
          <div class="characteristic not-applies" id="char-escrow">
            <span class="symbol">üè¶</span>
            <span class="text">Escrow Required</span>
          </div>
          <div class="characteristic not-applies" id="char-trustless">
            <span class="symbol">üõ°Ô∏è</span>
            <span class="text">Trustless Facilitator</span>
          </div>
        </div>

        <!-- Settlement Queue (for escrow-deferred) -->
        <div class="queue-panel" id="queue-panel" style="display: none">
          <h3>üì¶ SETTLEMENT QUEUE</h3>
          <div class="queue-item">
            <span class="label">Pending:</span>
            <span class="value" id="queue-pending">-</span>
          </div>
          <div class="queue-item">
            <span class="label">Total value:</span>
            <span class="value" id="queue-value">-</span>
          </div>
          <div class="queue-item">
            <span class="label">Chain:</span>
            <span class="value" id="queue-chain">-</span>
          </div>
          <button id="settle-batch-btn" class="settle-batch-button">
            ‚ö° Settle Batch Now
          </button>
        </div>

        <!-- Results Metrics -->
        <div class="results-panel" id="metrics" style="display: none">
          <h3>üìä RESULTS</h3>
          <div class="result-item">
            <span class="label">‚è±Ô∏è Request‚ÜíService:</span>
            <span class="value" id="time">-</span>
          </div>
          <div class="result-item">
            <span class="label">‚è±Ô∏è Request‚ÜíPay:</span>
            <span class="value" id="time-to-pay">-</span>
          </div>
          <div class="result-item">
            <span class="label">‚õΩ Gas:</span>
            <span class="value" id="gas">-</span>
          </div>
          <div class="result-item full-width">
            <span class="label">üîó Explorer:</span>
            <a id="tx-link" href="#" target="_blank" class="tx-link"
              >View Transaction</a
            >
          </div>
        </div>
      </aside>

      <!-- Right Event Flow Panel - 3 Column Layout -->
      <section class="flow-panel">
        <div class="flow-columns">
          <!-- Buyer Column -->
          <div class="flow-column buyer-column">
            <h3 class="column-header">BUYER</h3>
            <div class="column-events" id="buyer-events">
              <div class="event-placeholder">
                Click a payment scheme to start
              </div>
            </div>
          </div>

          <!-- Facilitator Column -->
          <div class="flow-column facilitator-column">
            <h3 class="column-header">FACILITATOR</h3>
            <div class="column-events" id="facilitator-events">
              <div class="event-placeholder">Waiting...</div>
            </div>
          </div>

          <!-- Seller Column -->
          <div class="flow-column seller-column">
            <h3 class="column-header">SELLER</h3>
            <div class="column-events" id="seller-events">
              <div class="event-placeholder">Waiting...</div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="footer-content">
        <span>ETHGlobal 2025</span>
        <span class="separator">|</span>
        <span>Oasis Privacy Track</span>
        <span class="separator">|</span>
        <span>Built with ‚ù§Ô∏è for the agentic web</span>
      </div>
    </footer>

    <script src="app.js"></script>
  </body>
</html>
